<h3>Artifacts</h3>

<table class="responsive nowrap table table-hover" id="dttb-artifacts" data-sort="true" data-source="<%= url_for(format: :json)%>">
  <thead>
    <tr>
      <th data-data="tittle">Tittle</th>
      <th data-data="content">Content</th>
      <th data-data="UserID">UserID</th>
    </tr>
  </thead>
  <% @artifacts.each do |artifact| %>
    <tr>
      <td><%= artifact.title %></td>
      <td><%= artifact.content %> </td>
      <td><%= artifact.user_id.to_s %></td>
      <td><%= link_to 'Edit', edit_artifact_path(artifact) %>
        /
        <%= link_to 'Destroy Artifact', artifact, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% if current_user.coaching_type == 'admin' %>
          /
          <%= link_to 'Move files', move_files_artifact_path(artifact)  %>
        <% end %>
      </td>
      <td><table class="responsive nowrap table table-hover" id="dttb-artifacts" data-sort="true">
        <% if artifact.documents.attached? %>
          <% artifact.documents.each do |document| %>
            <tr>
              <td> <%= document.filename %> </td>
              <td>
                <%= link_to 'View', url_for(document) %>
                /
                <%= link_to 'Download', rails_blob_path(document, disposition: 'attachment') %>
                /
                <%= link_to 'Purge Doc', delete_document_attachment_artifact_url(document.signed_id), method: :delete, data: {confirm: "Are you sure? "} %>
              </td>
            </tr>
          <% end %>
        <% end %>

      </td></table>
    </tr>
  <% end %>

</table>

<br>

<%= link_to 'New Artifact', new_artifact_path %>
