<% if !mspe_data.blank? %>
  <table id="mspeTable" class="table table-hover table-striped responsive" data-sort="true" >
    <thead>
      <tr class="filters">
        <% mspe_data.first.first.attributes.keys.each do |key| %>
          <th style="text-align:center"><%= key %></th>
        <% end %>
      </tr>
    </thead>
      <% mspe_data.each do |data| %>
        <% data.each do |sub_data| %>
          <tr>
            <% sub_data.attributes.each do |key, val| %>
                 <% if key == "final_grade" %>
                   <% final_hash = JSON.parse(sub_data["final_grade"] ) %>
                   <% val = final_hash["Grade"] %>
                 <% end %>

                <td style="text-align:center"> <%= val %> </td>
            <% end %>
          </tr>
        <% end %>
      <% end %>
  </table>
<% end %>
